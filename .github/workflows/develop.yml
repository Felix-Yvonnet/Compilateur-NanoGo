name: Yaml

on: 
	push:
		branches :
			- master

concurrency:
  #Â any in-progress job or run
  group: ${{ github.ref }}
  # interrompt pipeline si nouveau commit
  cancel-in-progress: true
        

jobs:
	lint-fmt:
		runs-on: ubuntu-latest

	steps:
		- name: Checkout code
		  uses: action/checkout@v3

		- name: Use OCaml 4.14.x
		  uses: ocaml/setup-ocaml@v2
		  with:
			ocaml-compiler: 4.14.x
			dune-cache: true

		- name: Lint fmt
		  uses: ocaml/setup-ocaml/lint-fmt@v2

		- name: Dependencies
		  run: opam install . --deps-only

		- run: ./tests/launch.sh
